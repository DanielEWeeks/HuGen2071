# Lecture: R Character Manipulation

## R Character Manipulation lecture

Here's a recording of this lecture (42 minutes 49 seconds):

[Recording](https://pitt.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=58718f98-b868-443e-9e0a-b34c0158657c){.external target="_blank"}

<iframe credentialless src="https://pitt.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=58718f98-b868-443e-9e0a-b34c0158657c&autoplay=false&offerviewer=true&showtitle=true&showbrand=true&captions=false&interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen allow="autoplay">

</iframe>

## R Character Manipulation slides

[PDF slide set](pdfs/R_character_manipulation_full.pdf){target="_blank"}

<iframe width="100%" height="800" src="pdfs/R_character_manipulation_full.pdf">

</iframe>

## Questions

### Question 1

Given the two vectors of alleles below, which of the following R commands would correctly combine them to produce a single vector of genotypes?

```
> a1 <- c("A","T","A")
> a2 <- c("A","A","T")
```

```{r, echo=FALSE}
library(webexercises)
choices = c(
answer = "c(paste0(a1, a2))",
answer = 'paste(a1, a2, sep = "")',
answer = "str_c(a1, a2)",
"c(a1, a2)"
)
```

`r longmcq(choices)`

```{webr-r}
# Edit/add R code here
(a1 <- c("A","T","A"))
(a2 <- c("A","A","T"))
```

### Question 2

Given a vector of genotypes separated by a forward slash, which of the following R commands would correctly change it into a vector of alleles?


```
> g <- c("A/A","A/T","A/T","T/T","A/A")
```

```{r, echo=FALSE}
choices = c(
'strsplit(g, "/")',
answer = 'unlist(strsplit(g, "/"))',
'c(strsplit(g, "/"))',
'str_split(g, "/")'
)
```

`r longmcq(choices)`


```{webr-r}
# Edit/add R code here
(g <- c("A/A","A/T","A/T","T/T","A/A"))
```

### Question 3

Given a vector of multi-part IDs, which of the following R commands would correctly change it into a vector containing only the "Person" part of each ID?

```
> id <- c("Person1-Sample1","Person1-Sample2", "Person2-Sample1", "Person30-Sample1")
```

```{r, echo=FALSE}
choices = c(
'strsplit(id, "-")',
answer = 'sub("-.*", "", id)',
answer = 'str_extract(id, "Person[0-9]+")',
"substr(id, 1, 7)",
answer = 'str_split_fixed(id, "-", 2)[,1]'
)
```

`r longmcq(choices)`

```{webr-r}
# Edit/add R code here
(id <- c("Person1-Sample1","Person1-Sample2", "Person2-Sample1", "Person30-Sample1"))
```

### Question 4

Suppose you have a data frame called `df` with a column named `V1` containing journal names. Which of the following R commands would correctly determine the number of journals in the list that start with the phrase "GENET"?

```{r, echo=FALSE}
choices = c(
'length(grepl("^GENET", df[,"V1"]))',
answer = 'sum(grepl("^GENET", df[,"V1"]))',
answer = 'sum(startsWith(df[,"V1"], "GENET"))',
'nrow(grepl("^GENET", df[,"V1"]))'
)
```

`r longmcq(choices)`

```{webr-r}
# Download the data file within the WebR environment
root_srcfile <- "https://raw.githubusercontent.com/DanielEWeeks/HuGen2071/main/"
download.file(paste0(root_srcfile,"data/Ranking_tab_delimited.txt"),
              "Ranking_tab_delimited.txt")
df <- read.table("Ranking_tab_delimited.txt", header = FALSE, sep="\t")
dim(df)
head(df)
# Edit/add R code here
```

### Question 5

Suppose you have a data frame named `df`. Which of the following R commands would correctly add a new, unique journal ID column named `jid` that consists of a "J" followed by the row number in the style of J1, J2, J3, etc.?

```{r, echo=FALSE}
choices = c(
'df[,"jid"] <- paste("J", 1:nrow(df))',
answer = 'df[,"jid"] <- paste0("J", 1:nrow(df))',
'df[,"jid"] <- "J" + seq_len(nrow(df))',
'df[,"jid"] <- paste0("J", row(df))'
)
```

`r longmcq(choices)`

```{webr-r}
# Run the webR chunk above to load the data frame df
# Edit/add R code here
```
